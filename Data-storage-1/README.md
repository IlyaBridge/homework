# Домашнее задание к занятию "`Базы данных, их типы`" - `Казначеев Илья`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
---

### Задание 1. СУБД
Кейс - Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1 Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2 Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. 
Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3 Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4 Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?
Приведите ответ в свободной форме.

### Решение 1. СУБД
1.1 В данном случае рекомендуемая СУБД будет реляционная СУБД (например: PostgreSQL, MySQL). Реляционные базы данных хорошо подходят для работы с структурированными данными. Они обеспечивают высокую целостность данных, возможность создания сложных запросов.

1.1* Для ускорения работы можно использовать API-сервисы, такие как Oracle REST Data Services (ORS) для ORACLE или Entity Framework Core для Microsoft SQL Server, они позволяют оптимизировать SQL-запросы, что в итоге снижает затраты на процесс хеширования.

1.2 Для лендингов и для CRM подойдет NoSQL база данных с документно-ориентированной моделью (пример: MongoDB, Couchbase). Данный тип СУБД подходит для хранения и быстрого поиска данных о лидах, которые могут иметь разную структуру для каждого лендинга. Горизонтальное масштабирование позволят эффективно обрабатывать большие объемы данных.

1.2* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией? Да, можно использовать одну документно-ориентированную СУБД для хранения данных всех лендингов и CRM. Разделение данных можно осуществить с помощью коллекций или тегов.

1.3 Можно использовать ту же документно-ориентированную СУБД, что и для CRM (MongoDB, Couchbase). Структура данных в этом случае достаточно проста и легко представляется в виде документов. Использование одной СУБД позволит упростить управление и интеграцию данных.

1.3* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?
Можно создать отдельную коллекцию или раздел в существующей СУБД CRM для хранения документов с корпоративными нормами, правилами и обучающими материалами. Доступ к этим данным можно организовать через интерфейс CRM.

1.4 В данном случае подойдёт графовая СУБД (как пример - Neo4j).
Графовые базы данных подходят для работы с данными, имеющими сложные связи. Они позволяют быстро находить оптимальные пути и учитывать различные факторы (например, время доставки, расстояние, загруженность курьеров).

1.4* Отдел закупок может использовать ту же графовую СУБД, что и логистический отдел. Данные о закупках и поставках можно связать с данными о маршрутах доставки, что позволит оптимизировать весь процесс.

1.5* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?
Использовать одну СУБД для всех задач нецелесообразно. Каждая предметная область имеет свои специфические требования к структуре данных и производительности.
Комбинация реляционной, документно-ориентированной и графовой СУБД позволит эффективно решить все поставленные задачи.

---

### Задание 2. Транзакции
2.1 Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.
2.1* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?
Приведите ответ в свободной форме.

### Решение 2. Транзакции
2.1 Пополнение баланса счета телефона пользователем
1. Инициализация транзакции. Пользователь инициирует процесс пополнения счета, указывая номер телефона и сумму пополнения. Система создает новую транзакцию со статусом "ожидает обработки".
2. Аутентификация и авторизация. Система проверяет данные пользователя (например, логин/пароль или данные платежной карты) и убеждается, что у него достаточно средств для совершения платежа.
3. Обработка платежа. Система взаимодействует с платежным шлюзом для проведения платежа. Платежный шлюз списывает указанную сумму со счета пользователя.
4. Подтверждение платежа. Платежный шлюз сообщает системе об успешном списании средств.
5. Зачисление средств на баланс. Система зачисляет указанную сумму на баланс телефонного счета пользователя.
6. Завершение транзакции. Система меняет статус транзакции на "завершена успешно", уведомляет пользователя об успешном пополнении и (опционально) отправляет квитанцию.

2.1* Пополнение счета телефона через автоплатеж
1. Настройка автоплатежа. Пользователь настраивает автоплатеж, указывая номер телефона, сумму, периодичность пополнения (например, ежемесячно) и критерии запуска (например, при достижении определенного порога баланса).
2. Мониторинг баланса/даты. Система периодически проверяет баланс телефона пользователя или дату следующего платежа.
Системный процесс: Периодически запускает проверку условий для всех активных автоплатежей.
3. Инициализация транзакции. При выполнении условий (достижение порога баланса или наступление даты платежа) система инициирует транзакцию пополнения.
4. Авторизация. Система автоматически авторизует платеж, используя сохраненные ранее данные платежного метода.
5. Обработка и подтверждение платежа. Происходит аналогично ручному пополнению.
6. Зачисление средств и завершение транзакции. Происходит аналогично ручному пополнению. Система обновляет дату следующего платежа в настройках автоплатежа.

### Задание 3. SQL vs NoSQL
3.1 Напишите пять преимуществ SQL-систем по отношению к NoSQL.
3.1* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.
Приведите ответ в свободной форме.

### Решение 3. SQL vs NoSQL
3.1 Пять преимуществ SQL-систем по отношению к NoSQL
1. Строгая схема данных. SQL-системы используют четко определенные схемы, это обеспечивает структурированность и целостность данных.
2. Поддержка сложных запросов. Язык SQL позволяет выполнять сложные выборки, объединения и аналитические операции.
3. ACID-транзакции. Гарантия атомарности, согласованности, изолированности и долговечности транзакций обеспечивает надежность данных.
4. Широкая стандартизация. SQL является стандартом с множеством отлаженных инструментов и поддержкой со стороны сообщества.
5. Мощные инструменты аналитики и отчетности. Богатый набор функций для аналитических задач и генерации отчетов.

### Задание 4. Кластеры
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.
На основе какого критерия будете выбирать тип СУБД, и какая модель распределённых вычислений здесь справится лучше всего и почему?
Приведите ответ в свободной форме.

### Решение 4. Кластеры
Что касается критерий выбора СУБД, это масштабируемость и способность эффективно обрабатывать распределенные вычисления.
Выбор в сторону NoSQL баз данных, таких как Cassandra или MongoDB, которые лучше масштабируются горизонтально в сочетании с моделью MapReduce.

NoSQL обеспечивает горизонтальное масштабирование и высокую производительность при распределенной обработке
MapReduce эффективно для:
   - Параллельной обработки больших объемов данных
   - Распределения нагрузки между 1000 машин
   - Отказоустойчивости при сбоях отдельных узлов
   - Автоматической балансировки нагрузки
